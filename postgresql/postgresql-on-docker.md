**PostgreSQL on Docker Installation**

To pull down an image for the latest stable release of Postgres, simply run

    docker pull postgres

This will pull down the latest stable release Postgres image from the official Postgres docker hub [repository](https://hub.docker.com/_/postgres/).

We want to store data generated by Postgres beyond container's lifecycle. So we need to map a local mount folder as a data volume to an appropriate path inside the container. 

    mkdir -p $HOME/docker/volumes/postgres

Starting the Postgres container with docker run command

    docker run --rm --name postgres --net host -e POSTGRES_PASSWORD=password -d -p 5432:5432 -v $HOME/docker/volumes/postgres:/var/lib/postgresql/data postgres

Options :

 - --rm : Automatically remove the container and it's associated file system upon exit.
 - --name : Name for container.
 - --net :  To connect from the localhost
 - -e : Expose environment variable POSTGRES_PASSWORD
 - -d : Launches container in the background
 - -p : Bind localhost port to container port
 - -v : Mount container volume to localhost. This ensures that postgres data persists even after the container is removed.

After container is up and running go $HOME/docker/volumes/postgres and change pg_hba.conf and postgresql.conf files :

**pg_hba.conf**
host	   all	   all	   127.0.0.1/32		md5
host	   all	   all	   0.0.0.0/0	    	    md5

**postgresql.conf**
listen_addresses = '*'

After changes restart docker container

    docker restart postgres


If you want to enable remote access to PostgreSQL server add this to line to pg_hba.conf

host   all  all  remote_ip_address/32  md5

Also add remote ip address to ufw 

ufw allow from remote_ip_address/32 to any port 5432
